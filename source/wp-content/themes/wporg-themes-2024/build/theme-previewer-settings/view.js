import*as e from"@wordpress/interactivity";var t={d:(e,r)=>{for(var s in r)t.o(r,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:r[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const r=(i={getContext:()=>e.getContext,store:()=>e.store},o={},t.d(o,i),o),{state:s}=(0,r.store)("wporg/themes/theme-previewer-settings",{state:{isError:!1,isSuccess:!1,isInvalid:!1,isSubmitting:!1,get resultMessage(){const{labels:e}=(0,r.getContext)();return s.isInvalid?e.invalid:s.isSuccess?e.success:s.isError?e.error:""}},actions:{onChange(){s.isSuccess=!1,s.isError=!1,s.isInvalid=!1},*onSubmit(e){e.preventDefault();const t=(0,r.getContext)(),{slug:i}=t,o=e.target.elements.blueprint?.value||"";try{const e=JSON.parse(o);if("object"!=typeof e||!e.steps)throw new Exception("Invalid blueprint.")}catch(e){return void(s.isInvalid=!0)}s.isSubmitting=!0;try{if(void 0===(yield wp.apiFetch({path:"/themes/v1/preview-blueprint/"+i,method:"POST",data:{blueprint:o}})).steps)throw new Error("Invalid response from API.");s.isSuccess=!0,s.blueprint=o}catch(e){s.isError=!0}s.isSubmitting=!1}}});var i,o;